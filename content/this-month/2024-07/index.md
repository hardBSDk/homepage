+++
title = "This Month in Rust OSDev: July 2024"
date = 2024-08-03

[extra]
month = "July 2024"
editors = ["phil-opp"]
+++

Welcome to a new issue of _"This Month in Rust OSDev"_. In these posts, we give a regular overview of notable changes in the Rust operating system development ecosystem.

<!-- more -->

This series is openly developed [on GitHub](https://github.com/rust-osdev/homepage/). Feel free to open pull requests there with content you would like to see in the next issue. If you find some issues on this page, please report them by [creating an issue](https://github.com/rust-osdev/homepage/issues/new) or using our <a href="#comment-form">_comment form_</a> at the bottom of this page.

<!--
    This is a draft for the upcoming "This Month in Rust OSDev (July 2024)" post.
    Feel free to create pull requests against the `next` branch to add your
    content here.
    Please take a look at the past posts on https://rust-osdev.com/ to see the
    general structure of these posts.
-->

## Announcements, News, and Blog Posts

Here we collect news, blog posts, etc. related to OS development in Rust.

<!--
Please follow this template:

- [Title](https://example.com)
  - (optional) Some additional context
-->


## Infrastructure and Tooling

In this section, we collect recent updates to `rustc`, `cargo`, and other tooling that are relevant to Rust OS development.

<!--
    Please use the following template:

- [Title](https://example.com)
  - (optional) Some additional context
-->


## `rust-osdev` Projects

In this section, we give an overview of notable changes to the projects hosted under the [`rust-osdev`](https://github.com/rust-osdev/about) organization.


### [`virtio-spec-rs`](https://github.com/rust-osdev/virtio-spec-rs) (new project!)
<span class="maintainers">Maintained by [@mkroening](https://github.com/mkroening)</span>

The `virtio-spec` crate provides definitions from the Virtual I/O Device (VIRTIO) specification. 
This project aims to be unopinionated regarding actual VIRTIO drivers that are implemented on top of this crate.

The origins of this crate are in [Hermit](https://github.com/hermit-os/kernel).
Due to the need for correct foundational definitions from the Virtio spec that are easily reviewable and independent of the actual driver logic, this project was created from the ground up and without any intended bias towards Hermit.

Currently, definitions are available for split and packed virtqueues, for Virtio over MMIO and Virtio over PCI, and for the network, socket and file system devices.
Feature requests for additional devices are more than welcome!


### [`fuse-abi`](https://github.com/rust-osdev/fuse-abi) (new project!)
<span class="maintainers">Maintained by [@mkroening](https://github.com/mkroening)</span>

The `fuse-abi` crate provides bindings to FUSE devices.
In motivation similar to that of `virtio-spec`, this project aims to provide correct foundational definitions for the FUSE kernel ABI.
It can even be used together with `virtio-spec` when creating a driver for the Virtio file system device.

This crate essentially brings [`#include <linux/fuse.h>`](https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/include/uapi/linux/fuse.h?h=v6.9) to Rust.
The code is autogenerated using [`bindgen`](https://github.com/rust-lang/rust-bindgen), ensuring the correctness of definitions.

### [`uefi-rs`](https://github.com/rust-osdev/uefi-rs)
<span class="maintainers">Maintained by [@GabrielMajeri](https://github.com/GabrielMajeri), [@nicholasbishop](https://github.com/nicholasbishop), and [@phip1611](https://github.com/phip1611)</span>

The `uefi-rs` crate provides safe and performant wrappers for [UEFI](https://en.wikipedia.org/wiki/Unified_Extensible_Firmware_Interface), the successor to the BIOS. We merged the following PRs this month:

- [release: uefi-macros-0.14.0, uefi-raw-0.6.0, uefi-0.29.0](https://github.com/rust-osdev/uefi-rs/pull/1221)
- [book: Publish the latest release instead of main](https://github.com/rust-osdev/uefi-rs/pull/1224)
- [Add redirects for all the html files under HEAD](https://github.com/rust-osdev/uefi-rs/pull/1225)
- [Drop SystemTable arg from uefi::helpers::init](https://github.com/rust-osdev/uefi-rs/pull/1226)
- [uefi-macros: Allow zero-param function in the entry macro](https://github.com/rust-osdev/uefi-rs/pull/1227)
- [uefi: Fix return value lifetime for register_protocol_notify](https://github.com/rust-osdev/uefi-rs/pull/1228)
- [logger: Remove some unnecessary cfgs](https://github.com/rust-osdev/uefi-rs/pull/1235)
- [fix(deps): update rust crate syn to v2.0.70](https://github.com/rust-osdev/uefi-rs/pull/1231)
- [uefi: _print more failsafe](https://github.com/rust-osdev/uefi-rs/pull/1239)
- [mem: introduce traits MemoryMap and MemoryMapMut](https://github.com/rust-osdev/uefi-rs/pull/1234)
- [Add uefi::system module](https://github.com/rust-osdev/uefi-rs/pull/1237)
- [Add PcrEvent::new_in_box/PcrEventInputs::new_in_box](https://github.com/rust-osdev/uefi-rs/pull/1246)
- [Add uefi::runtime module](https://github.com/rust-osdev/uefi-rs/pull/1249)
- [runtime: Add freestanding functions to get/set/delete UEFI variables](https://github.com/rust-osdev/uefi-rs/pull/1250)
- [boot: Always impl Drop for MemoryMapBackingMemory](https://github.com/rust-osdev/uefi-rs/pull/1248)
- [test-runner: Drop the memory map OOM loop](https://github.com/rust-osdev/uefi-rs/pull/1254)
- [uefi-raw: Add more MemoryType constants](https://github.com/rust-osdev/uefi-rs/pull/1253)
- [Add variable key functions to `uefi::runtime`](https://github.com/rust-osdev/uefi-rs/pull/1252)
- [uefi: mem: mem.rs -> mem/mod.rs](https://github.com/rust-osdev/uefi-rs/pull/1251)
- [runtime: Add query_variable_info](https://github.com/rust-osdev/uefi-rs/pull/1256)
- [Fix CI for Rust 1.80](https://github.com/rust-osdev/uefi-rs/pull/1261)
- [Add capsule update functions to `uefi::runtime`](https://github.com/rust-osdev/uefi-rs/pull/1259)
- [Add uefi::boot module](https://github.com/rust-osdev/uefi-rs/pull/1255)
- [runtime: Add uefi::runtime::reset](https://github.com/rust-osdev/uefi-rs/pull/1258)
- [cleanup/follow-up: memory_map](https://github.com/rust-osdev/uefi-rs/pull/1240)
- [Move the global image handle to uefi::boot](https://github.com/rust-osdev/uefi-rs/pull/1262)
- [Add `boot::locate_handle_buffer`](https://github.com/rust-osdev/uefi-rs/pull/1269)
- [boot: Add freestanding version of open_protocol](https://github.com/rust-osdev/uefi-rs/pull/1270)
- [boot: Add freestanding version of open_protocol_exclusive](https://github.com/rust-osdev/uefi-rs/pull/1272)
- [Finalize memory_map module refactoring](https://github.com/rust-osdev/uefi-rs/pull/1263)
- [Add `boot::{load_image, unload_image, start_image}`](https://github.com/rust-osdev/uefi-rs/pull/1273)
- [clippy: add use_self and const fn](https://github.com/rust-osdev/uefi-rs/pull/1271)
- [clippy: streamline lints](https://github.com/rust-osdev/uefi-rs/pull/1274)
- [ci: reorganize nightly CI jobs](https://github.com/rust-osdev/uefi-rs/pull/1275)

<!-- - [fix(deps): update rust crate clap to v4.5.8](https://github.com/rust-osdev/uefi-rs/pull/1220) -->
<!-- - [chore(deps): update rust crate log to v0.4.22](https://github.com/rust-osdev/uefi-rs/pull/1219) -->
<!-- - [chore(deps): update crate-ci/typos action to v1.23.1](https://github.com/rust-osdev/uefi-rs/pull/1232) -->
<!-- - [chore(deps): lock file maintenance](https://github.com/rust-osdev/uefi-rs/pull/1233) -->
<!-- - [chore(deps): update crate-ci/typos action to v1.23.2](https://github.com/rust-osdev/uefi-rs/pull/1242) -->
<!-- - [chore(deps): lock file maintenance](https://github.com/rust-osdev/uefi-rs/pull/1245) -->
<!-- - [chore(deps): lock file maintenance](https://github.com/rust-osdev/uefi-rs/pull/1257) -->
<!-- - [chore(deps): update crate-ci/typos action to v1.23.5](https://github.com/rust-osdev/uefi-rs/pull/1265) -->
<!-- - [chore(deps): lock file maintenance](https://github.com/rust-osdev/uefi-rs/pull/1267) -->
<!-- - [fix(deps): update rust crate heck to 0.5.0](https://github.com/rust-osdev/uefi-rs/pull/1268) -->



### [`acpi`](https://github.com/rust-osdev/acpi)
<span class="maintainers">Maintained by [@IsaacWoods](https://github.com/IsaacWoods)</span>

The `acpi` repository contains crates for parsing the ACPI tables â€“ data structures that the firmware of modern computers use to relay information about the hardware to the OS. We merged the following changes this month:

- [acpi: add support for SPCR table](https://github.com/rust-osdev/acpi/pull/216)

Thanks to [@00xc](https://github.com/00xc) for their contributions!


### [`uart_16550`](https://github.com/rust-osdev/uart_16550)
<span class="maintainers">Maintained by [@phil-opp](https://github.com/phil-opp)</span>

The `uart_16550` crate provides basic support for serial port I/O for 16550-compatible UARTs. We merged the following change this month:

- [build(deps): update bitflags dependency to version 2](https://github.com/rust-osdev/uart_16550/pull/33)
- [feat: add `try_send_raw` and `try_receive`](https://github.com/rust-osdev/uart_16550/pull/34)

Thanks to [@mkroening](https://github.com/mkroening) for their contributions!


### [`endian-num`](https://github.com/rust-osdev/endian-num)
<span class="maintainers">Maintained by [@mkroening](https://github.com/mkroening)</span>

The `endian-num` crate provides the `Be` (big-endian) and `Le` (little-endian) byte-order-aware numeric types.

- [test: fix doctests for 32-bit and 16-bit pointer widths](https://github.com/rust-osdev/endian-num/pull/4)
- [chore: remove appendix from LICENSE-APACHE](https://github.com/rust-osdev/endian-num/pull/5)


### [`bootloader`](https://github.com/rust-osdev/bootloader)
<span class="maintainers">Maintained by [@phil-opp](https://github.com/phil-opp) and [@Freax13](https://github.com/orgs/rust-osdev/people/Freax13)</span>

The `bootloader` crate implements a custom Rust-based bootloader for easy loading of 64-bit ELF executables. This month, we merged the following improvements:

- [always cover at least the first 4 GiB of physical memory](https://github.com/rust-osdev/bootloader/pull/448)


### [`x86_64`](https://github.com/rust-osdev/x86_64)
<span class="maintainers">Maintained by [@phil-opp](https://github.com/phil-opp), [@josephlr](https://github.com/orgs/rust-osdev/people/josephlr), and [@Freax13](https://github.com/orgs/rust-osdev/people/Freax13)</span>

The `x86_64` crate provides various abstractions for `x86_64` systems, including wrappers for CPU instructions, access to processor-specific registers, and abstraction types for architecture-specific structures such as page tables and descriptor tables.

We merged the following PR this month:

- [Ensure that Page actually implements Hash](https://github.com/rust-osdev/x86_64/pull/490)
- [don't use label starting with `1`](https://github.com/rust-osdev/x86_64/pull/492)
- [Add size and len for PageRange, PhysFrameRange, PageRangeInclusive and PhysFrameRangeInclusive](https://github.com/rust-osdev/x86_64/pull/491)
- [fix testing](https://github.com/rust-osdev/x86_64/pull/495)

Thanks to [@Wasabi375](https://github.com/Wasabi375) for their contribution!


<!--
    Please use the following template:

    ### [`repo_name`](https://github.com/rust-osdev/repo_name)
    <span class="maintainers">Maintained by [@maintainer_1](https://github.com/maintainer_1)</span>

    The `repo_name` crate ...<<short introduction>>...

    We merged the following changes this month:
    <<changelog, either in list or text form>>
-->


## Other Projects

In this section, we describe updates to Rust OS projects that are not directly related to the `rust-osdev` organization. Feel free to [create a pull request](https://github.com/rust-osdev/homepage/pulls) with the updates of your OS project for the next post.

<!--
    Please use the following template:

    ### [`owner_name/repo_name`](https://github.com/rust-osdev/owner_name/repo_name)
    <span class="maintainers">(Section written by [@your_github_name](https://github.com/your_github_name))</span>

    ...<<your project updates>>...
-->

### [`phip1611/bit_ops`](https://github.com/phip1611/bit_ops)
<span class="maintainers">(Section written by [@phip1611](https://github.com/phip1611))</span>

I've recently created and published [`bit_ops`](https://github.com/phip1611/bit_ops).
It offers common bit-oriented operations on primitive integer types with a focus on
`no_std` and `const` compatibility. Unlike other crates that provide tooling to
create sophisticated high-level types with bitfields, the focus of `bit_ops` is
on raw primitive integer types.


## Join Us?

Are you interested in Rust-based operating system development? Our `rust-osdev` organization is always open to new members and new projects. Just let us know if you want to join! A good way for getting in touch is our [Zulip chat](https://rust-osdev.zulipchat.com).
